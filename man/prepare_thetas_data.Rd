% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/model-class.R
\name{prepare_thetas_data}
\alias{prepare_thetas_data}
\title{Prepare Theta Parameters Data from MCMC Samples}
\usage{
prepare_thetas_data(x, start = 1L, end = NULL, subchain = FALSE, chains = NA)
}
\arguments{
\item{x}{A model object containing MCMC samples (requires slots: @theta, @pnames,
@nchain, @nmc, and optionally @subchain_theta if subchain=TRUE)}

\item{start}{First iteration to include (default: 1)}

\item{end}{Last iteration to include (default: NULL uses all available samples)}

\item{subchain}{Logical indicating whether to extract subchain samples (default: FALSE)}

\item{chains}{Numeric vector specifying which chains to include (default: NA includes all chains)}
}
\value{
A data.table in long format with columns:
\itemize{
  \item Iteration: The MCMC iteration number
  \item Chain: The chain identifier (factor)
  \item Parameter: The parameter name (factor)
  \item value: The sampled parameter values
}
}
\description{
Extracts and formats theta parameter samples from MCMC output for analysis or visualization,
with options for subchain extraction and chain selection.
}
\details{
This function provides flexible extraction of theta parameters:
\itemize{
  \item Handles both main chains and subchains (when available)
  \item Allows selection of specific chains
  \item Supports iteration range selection
  \item Returns data in tidy format for easy plotting with ggplot2
}

When subchain=TRUE, the function will attempt to access @subchain_theta slot.
If chains are specified, only those chains will be included in the output.
}
\examples{
\dontrun{
# Basic usage with main chains
theta_data <- prepare_thetas_data(fit, start = 500)

# Extract subchains instead of main chains
subchain_data <- prepare_thetas_data(fit, subchain = TRUE)

# Specific chains only
chain1_data <- prepare_thetas_data(fit, chains = 1)

# Using with ggplot2
library(ggplot2)
ggplot(
    prepare_thetas_data(fit),
    aes(x = Iteration, y = value, color = Chain)
) +
    geom_line(alpha = 0.7) +
    facet_wrap(~Parameter, scales = "free_y") +
    labs(title = "Theta Parameter Traces")
}

}
